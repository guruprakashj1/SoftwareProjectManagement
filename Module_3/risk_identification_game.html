<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Risk Identification Master</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .game-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .score-board {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 20px 0;
        }

        .score-item {
            background: rgba(255,255,255,0.2);
            padding: 10px 20px;
            border-radius: 10px;
            backdrop-filter: blur(5px);
        }

        .technique-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .technique-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .technique-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .technique-card.active {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            transform: scale(1.05);
        }

        .technique-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .game-area {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 500px;
        }

        .scenario-box {
            background: linear-gradient(45deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .activity-area {
            margin-top: 20px;
        }

        .drag-drop-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .risk-items {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            min-height: 200px;
        }

        .risk-categories {
            background: #e9ecef;
            border-radius: 10px;
            padding: 15px;
            min-height: 200px;
        }

        .risk-item {
            background: #FF6B6B;
            color: white;
            padding: 10px;
            margin: 5px 0;
            border-radius: 8px;
            cursor: grab;
            transition: all 0.3s;
            user-select: none;
        }

        .risk-item:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .risk-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zone {
            border: 2px dashed #ccc;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            min-height: 60px;
            transition: all 0.3s;
        }

        .drop-zone.dragover {
            border-color: #4ECDC4;
            background: rgba(78, 205, 196, 0.1);
        }

        .drop-zone.correct {
            background: rgba(40, 167, 69, 0.2);
            border-color: #28a745;
        }

        .question-area {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }

        .option {
            background: #e9ecef;
            padding: 15px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
            border: 2px solid transparent;
        }

        .option:hover {
            background: #dee2e6;
            transform: translateY(-2px);
        }

        .option.selected {
            background: #4ECDC4;
            color: white;
            border-color: #45b7aa;
        }

        .option.correct {
            background: #28a745;
            color: white;
        }

        .option.incorrect {
            background: #dc3545;
            color: white;
        }

        .btn {
            background: linear-gradient(45deg, #4ECDC4, #44A08D);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            text-align: center;
            font-weight: bold;
        }

        .feedback.correct {
            background: rgba(40, 167, 69, 0.2);
            color: #155724;
            border: 1px solid #28a745;
        }

        .feedback.incorrect {
            background: rgba(220, 53, 69, 0.2);
            color: #721c24;
            border: 1px solid #dc3545;
        }

        .swot-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .swot-quadrant {
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            min-height: 120px;
            position: relative;
        }

        .swot-quadrant h4 {
            margin-bottom: 10px;
            color: #495057;
        }

        .swot-quadrant.strengths { border-color: #28a745; }
        .swot-quadrant.weaknesses { border-color: #dc3545; }
        .swot-quadrant.opportunities { border-color: #007bff; }
        .swot-quadrant.threats { border-color: #ffc107; }

        .progress-bar {
            background: #e9ecef;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(90deg, #4ECDC4, #44A08D);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .hidden {
            display: none !important;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            margin: 5px 0;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .checklist-item:hover {
            background: #e9ecef;
        }

        .checklist-item.checked {
            background: rgba(40, 167, 69, 0.1);
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #dee2e6;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .checkbox.checked {
            background: #28a745;
            border-color: #28a745;
            color: white;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .bounce {
            animation: bounce 0.6s;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-header">
            <h1>üéØ Risk Identification Master</h1>
            <p>Learn to identify project risks using proven techniques!</p>
            <div class="score-board">
                <div class="score-item">Score: <span id="score">0</span></div>
                <div class="score-item">Level: <span id="level">1</span></div>
                <div class="score-item">Technique: <span id="current-technique">None</span></div>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill" style="width: 0%"></div>
            </div>
        </div>

        <div class="technique-selector" id="technique-selector">
            <div class="technique-card" data-technique="brainstorming">
                <div class="technique-icon">üí≠</div>
                <h3>Brainstorming</h3>
                <p>Team collaboration sessions</p>
            </div>
            <div class="technique-card" data-technique="expert-interviews">
                <div class="technique-icon">üë®‚Äçüíº</div>
                <h3>Expert Interviews</h3>
                <p>Consult domain experts</p>
            </div>
            <div class="technique-card" data-technique="checklist">
                <div class="technique-icon">‚úÖ</div>
                <h3>Checklist Analysis</h3>
                <p>Systematic risk review</p>
            </div>
            <div class="technique-card" data-technique="swot">
                <div class="technique-icon">üìä</div>
                <h3>SWOT Analysis</h3>
                <p>Strengths, Weaknesses, Opportunities, Threats</p>
            </div>
            <div class="technique-card" data-technique="historical">
                <div class="technique-icon">üìö</div>
                <h3>Historical Data</h3>
                <p>Learn from past projects</p>
            </div>
        </div>

        <div class="game-area">
            <div id="welcome-screen">
                <h2>Welcome to Risk Identification Master! üéØ</h2>
                <p>Select a risk identification technique above to start learning. Each technique includes interactive activities and real-world scenarios to help you master project risk identification.</p>
                <div style="margin-top: 20px;">
                    <h3>What you'll learn:</h3>
                    <ul style="margin: 15px 0; line-height: 1.6;">
                        <li><strong>Brainstorming:</strong> Collaborate with teams to identify potential risks</li>
                        <li><strong>Expert Interviews:</strong> Leverage domain expertise for risk discovery</li>
                        <li><strong>Checklist Analysis:</strong> Use systematic approaches to find risks</li>
                        <li><strong>SWOT Analysis:</strong> Analyze internal and external risk factors</li>
                        <li><strong>Historical Data:</strong> Learn from past project experiences</li>
                    </ul>
                </div>
            </div>

            <!-- Brainstorming Activity -->
            <div id="brainstorming-activity" class="hidden">
                <h2>üí≠ Brainstorming Session</h2>
                <div class="scenario-box">
                    <h3>Scenario: Mobile App Development Project</h3>
                    <p>You're leading a team developing a new mobile banking app. The project has a 6-month timeline with a team of 8 developers, 2 designers, and 3 QA testers. Conduct a brainstorming session to identify potential risks.</p>
                </div>
                
                <div class="activity-area">
                    <h4>Drag the identified risks to the appropriate risk categories:</h4>
                    <div class="drag-drop-area">
                        <div class="risk-items">
                            <h4>Potential Risks</h4>
                            <div class="risk-item" draggable="true" data-category="technical">Security vulnerabilities in payment processing</div>
                            <div class="risk-item" draggable="true" data-category="resource">Key developer leaving mid-project</div>
                            <div class="risk-item" draggable="true" data-category="external">Banking regulations changing</div>
                            <div class="risk-item" draggable="true" data-category="technical">App store approval delays</div>
                            <div class="risk-item" draggable="true" data-category="resource">Budget overrun due to scope creep</div>
                            <div class="risk-item" draggable="true" data-category="external">Competitor launching similar app</div>
                        </div>
                        <div class="risk-categories">
                            <h4>Risk Categories</h4>
                            <div class="drop-zone" data-category="technical">
                                <strong>Technical Risks</strong>
                                <p>Technology, security, performance issues</p>
                            </div>
                            <div class="drop-zone" data-category="resource">
                                <strong>Resource Risks</strong>
                                <p>People, budget, time constraints</p>
                            </div>
                            <div class="drop-zone" data-category="external">
                                <strong>External Risks</strong>
                                <p>Market, regulatory, competitive factors</p>
                            </div>
                        </div>
                    </div>
                    <button class="btn" onclick="checkBrainstormingAnswers()">Check Answers</button>
                    <div id="brainstorming-feedback"></div>
                </div>
            </div>

            <!-- Expert Interviews Activity -->
            <div id="expert-interviews-activity" class="hidden">
                <h2>üë®‚Äçüíº Expert Interview Simulation</h2>
                <div class="scenario-box">
                    <h3>Scenario: Enterprise Software Migration</h3>
                    <p>Your company is migrating from legacy systems to cloud-based solutions. You need to interview subject matter experts to identify potential risks.</p>
                </div>
                
                <div class="question-area">
                    <h4 id="expert-question">Which expert should you interview first for a software migration project?</h4>
                    <div class="options" id="expert-options">
                        <div class="option" data-answer="correct">IT Infrastructure Manager</div>
                        <div class="option" data-answer="incorrect">Marketing Director</div>
                        <div class="option" data-answer="incorrect">HR Manager</div>
                        <div class="option" data-answer="partial">End Users</div>
                    </div>
                    <button class="btn" onclick="submitExpertAnswer()" disabled id="expert-submit">Submit Answer</button>
                    <div id="expert-feedback"></div>
                </div>
            </div>

            <!-- Checklist Analysis Activity -->
            <div id="checklist-activity" class="hidden">
                <h2>‚úÖ Risk Identification Checklist</h2>
                <div class="scenario-box">
                    <h3>Scenario: Construction Project</h3>
                    <p>You're managing a commercial building construction project. Use the systematic checklist to identify potential risks.</p>
                </div>
                
                <div class="activity-area">
                    <h4>Check off the areas you should examine for risks:</h4>
                    <div id="checklist-items">
                        <div class="checklist-item" data-points="10">
                            <div class="checkbox"></div>
                            <span>Weather conditions and seasonal impacts</span>
                        </div>
                        <div class="checklist-item" data-points="10">
                            <div class="checkbox"></div>
                            <span>Material supply chain reliability</span>
                        </div>
                        <div class="checklist-item" data-points="10">
                            <div class="checkbox"></div>
                            <span>Permit and regulatory compliance</span>
                        </div>
                        <div class="checklist-item" data-points="10">
                            <div class="checkbox"></div>
                            <span>Contractor and subcontractor capabilities</span>
                        </div>
                        <div class="checklist-item" data-points="5">
                            <div class="checkbox"></div>
                            <span>Site soil conditions and surveys</span>
                        </div>
                        <div class="checklist-item" data-points="0">
                            <div class="checkbox"></div>
                            <span>Office coffee machine maintenance</span>
                        </div>
                        <div class="checklist-item" data-points="10">
                            <div class="checkbox"></div>
                            <span>Safety protocols and training</span>
                        </div>
                        <div class="checklist-item" data-points="0">
                            <div class="checkbox"></div>
                            <span>Employee birthday celebrations</span>
                        </div>
                    </div>
                    <button class="btn" onclick="submitChecklist()">Submit Checklist</button>
                    <div id="checklist-feedback"></div>
                </div>
            </div>

            <!-- SWOT Analysis Activity -->
            <div id="swot-activity" class="hidden">
                <h2>üìä SWOT Analysis for Risk Identification</h2>
                <div class="scenario-box">
                    <h3>Scenario: E-commerce Platform Launch</h3>
                    <p>You're launching a new e-commerce platform to compete with established players. Analyze strengths, weaknesses, opportunities, and threats to identify risks.</p>
                </div>
                
                <div class="activity-area">
                    <h4>Drag items to the correct SWOT quadrant:</h4>
                    <div style="margin: 20px 0;">
                        <div class="risk-item" draggable="true" data-swot="strengths">Experienced development team</div>
                        <div class="risk-item" draggable="true" data-swot="weaknesses">Limited brand recognition</div>
                        <div class="risk-item" draggable="true" data-swot="opportunities">Growing online shopping trend</div>
                        <div class="risk-item" draggable="true" data-swot="threats">Amazon's market dominance</div>
                        <div class="risk-item" draggable="true" data-swot="weaknesses">Tight budget constraints</div>
                        <div class="risk-item" draggable="true" data-swot="threats">Economic recession fears</div>
                    </div>
                    
                    <div class="swot-grid">
                        <div class="swot-quadrant strengths" data-swot="strengths">
                            <h4>üí™ Strengths</h4>
                            <p>Internal positive factors</p>
                        </div>
                        <div class="swot-quadrant weaknesses" data-swot="weaknesses">
                            <h4>‚ö†Ô∏è Weaknesses</h4>
                            <p>Internal negative factors</p>
                        </div>
                        <div class="swot-quadrant opportunities" data-swot="opportunities">
                            <h4>üöÄ Opportunities</h4>
                            <p>External positive factors</p>
                        </div>
                        <div class="swot-quadrant threats" data-swot="threats">
                            <h4>‚õàÔ∏è Threats</h4>
                            <p>External negative factors</p>
                        </div>
                    </div>
                    <button class="btn" onclick="checkSWOTAnswers()">Check SWOT Analysis</button>
                    <div id="swot-feedback"></div>
                </div>
            </div>

            <!-- Historical Data Activity -->
            <div id="historical-activity" class="hidden">
                <h2>üìö Historical Data Analysis</h2>
                <div class="scenario-box">
                    <h3>Scenario: Software Development Project</h3>
                    <p>Review historical data from previous projects to identify common risk patterns and prepare for your new project.</p>
                </div>
                
                <div class="question-area">
                    <h4 id="historical-question">Based on historical data showing that 60% of software projects experienced scope creep, what should be your primary mitigation strategy?</h4>
                    <div class="options" id="historical-options">
                        <div class="option" data-answer="correct">Implement strict change control processes</div>
                        <div class="option" data-answer="incorrect">Hire more developers</div>
                        <div class="option" data-answer="incorrect">Extend the project timeline by 50%</div>
                        <div class="option" data-answer="partial">Add 20% buffer to the budget</div>
                    </div>
                    <button class="btn" onclick="submitHistoricalAnswer()" disabled id="historical-submit">Submit Answer</button>
                    <div id="historical-feedback"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let gameState = {
            score: 0,
            level: 1,
            currentTechnique: 'none',
            completedTechniques: [],
            expertQuestionIndex: 0,
            historicalQuestionIndex: 0
        };

        const expertQuestions = [
            {
                question: "Which expert should you interview first for a software migration project?",
                options: ["IT Infrastructure Manager", "Marketing Director", "HR Manager", "End Users"],
                answers: ["correct", "incorrect", "incorrect", "partial"],
                feedback: {
                    correct: "Excellent! IT Infrastructure Managers understand technical constraints and system dependencies.",
                    partial: "Good thinking! End users provide valuable insights, but technical experts should be consulted first.",
                    incorrect: "This expert wouldn't have relevant insights for technical migration risks."
                }
            },
            {
                question: "When interviewing a security expert about data migration risks, what's the most important question?",
                options: ["What are potential data breach scenarios?", "How long will testing take?", "What's the budget impact?", "When should we go live?"],
                answers: ["correct", "incorrect", "incorrect", "incorrect"],
                feedback: {
                    correct: "Perfect! Security experts help identify vulnerabilities and attack vectors.",
                    incorrect: "This question is important but not the primary focus for security risk identification."
                }
            }
        ];

        const historicalQuestions = [
            {
                question: "Based on historical data showing that 60% of software projects experienced scope creep, what should be your primary mitigation strategy?",
                options: ["Implement strict change control processes", "Hire more developers", "Extend the project timeline by 50%", "Add 20% buffer to the budget"],
                answers: ["correct", "incorrect", "incorrect", "partial"],
                feedback: {
                    correct: "Excellent! Change control processes directly address the root cause of scope creep.",
                    partial: "Adding budget helps but doesn't prevent scope creep from happening.",
                    incorrect: "This doesn't address the underlying cause of scope creep."
                }
            },
            {
                question: "Historical data shows that projects with external dependencies fail 40% more often. What's the best risk response?",
                options: ["Identify all external dependencies early", "Avoid all external dependencies", "Double the project timeline", "Assign more project managers"],
                answers: ["correct", "incorrect", "incorrect", "incorrect"],
                feedback: {
                    correct: "Great! Early identification allows for proper planning and contingencies.",
                    incorrect: "This approach is either impractical or doesn't directly address the dependency risks."
                }
            }
        ];

        // Initialize game
        document.addEventListener('DOMContentLoaded', function() {
            setupEventListeners();
            updateDisplay();
        });

        function setupEventListeners() {
            // Technique selector
            document.querySelectorAll('.technique-card').forEach(card => {
                card.addEventListener('click', function() {
                    const technique = this.dataset.technique;
                    selectTechnique(technique);
                });
            });

            // Drag and drop for brainstorming
            setupDragAndDrop();

            // Expert interview options
            setupExpertInterview();

            // Checklist items
            setupChecklist();

            // SWOT analysis drag and drop
            setupSWOTDragDrop();

            // Historical data options
            setupHistoricalData();
        }

        function selectTechnique(technique) {
            gameState.currentTechnique = technique;
            
            // Update active technique card
            document.querySelectorAll('.technique-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-technique="${technique}"]`).classList.add('active');

            // Hide all activities
            document.querySelectorAll('[id$="-activity"], #welcome-screen').forEach(el => {
                el.classList.add('hidden');
            });

            // Show selected activity
            document.getElementById(`${technique}-activity`).classList.remove('hidden');
            
            updateDisplay();
        }

        function setupDragAndDrop() {
            const riskItems = document.querySelectorAll('.risk-item');
            const dropZones = document.querySelectorAll('.drop-zone');

            riskItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.category);
                    this.classList.add('dragging');
                });

                item.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });

            dropZones.forEach(zone => {
                zone.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });

                zone.addEventListener('dragleave', function() {
                    this.classList.remove('dragover');
                });

                zone.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const draggedCategory = e.dataTransfer.getData('text/plain');
                    const zoneCategory = this.dataset.category;
                    
                    this.classList.remove('dragover');
                    
                    if (draggedCategory === zoneCategory) {
                        const draggedElement = document.querySelector('.risk-item.dragging');
                        if (draggedElement) {
                            this.appendChild(draggedElement);
                            this.classList.add('correct');
                        }
                    }
                });
            });
        }

        function checkBrainstormingAnswers() {
            const dropZones = document.querySelectorAll('.drop-zone');
            let correctCount = 0;
            let totalItems = 6;

            dropZones.forEach(zone => {
                const items = zone.querySelectorAll('.risk-item');
                items.forEach(item => {
                    if (item.dataset.category === zone.dataset.category) {
                        correctCount++;
                    }
                });
            });

            const score = Math.round((correctCount / totalItems) * 100);
            gameState.score += score;

            const feedback = document.getElementById('brainstorming-feedback');
            if (correctCount === totalItems) {
                feedback.innerHTML = `<div class="feedback correct">Perfect! You correctly categorized all risks. Brainstorming sessions help teams identify risks across different categories. +${score} points!</div>`;
                if (!gameState.completedTechniques.includes('brainstorming')) {
                    gameState.completedTechniques.push('brainstorming');
                }
            } else {
                feedback.innerHTML = `<div class="feedback incorrect">Good effort! You got ${correctCount}/${totalItems} correct. Review the risk categories and try to think about which areas each risk affects most directly. +${score} points!</div>`;
            }

            updateDisplay();
        }

        function setupExpertInterview() {
            const options = document.querySelectorAll('#expert-options .option');
            const submitBtn = document.getElementById('expert-submit');

            options.forEach(option => {
                option.addEventListener('click', function() {
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    submitBtn.disabled = false;
                });
            });
        }

        function submitExpertAnswer() {
            const selectedOption = document.querySelector('#expert-options .option.selected');
            const answer = selectedOption.dataset.answer;
            const question = expertQuestions[gameState.expertQuestionIndex];
            
            const options = document.querySelectorAll('#expert-options .option');
            options.forEach((option, index) => {
                option.classList.add(question.answers[index]);
            });

            const feedback = document.getElementById('expert-feedback');
            let points = 0;
            if (answer === 'correct') points = 100;
            else if (answer === 'partial') points = 50;

            gameState.score += points;
            feedback.innerHTML = `<div class="feedback ${answer === 'correct' ? 'correct' : 'incorrect'}">${question.feedback[answer]} +${points} points!</div>`;

            document.getElementById('expert-submit').disabled = true;

            // Load next question or complete
            setTimeout(() => {
                gameState.expertQuestionIndex++;
                if (gameState.expertQuestionIndex < expertQuestions.length) {
                    loadNextExpertQuestion();
                } else {
                    if (!gameState.completedTechniques.includes('expert-interviews')) {
                        gameState.completedTechniques.push('expert-interviews');
                    }
                    feedback.innerHTML += '<div class="feedback correct">Expert Interview technique completed! You\'ve learned how to leverage domain expertise for comprehensive risk identification.</div>';
                }
            }, 2000);

            updateDisplay();
        }

        function loadNextExpertQuestion() {
            const question = expertQuestions[gameState.expertQuestionIndex];
            document.getElementById('expert-question').textContent = question.question;
            
            const options = document.querySelectorAll('#expert-options .option');
            options.forEach((option, index) => {
                option.textContent = question.options[index];
                option.dataset.answer = question.answers[index];
                option.className = 'option';
            });

            document.getElementById('expert-submit').disabled = true;
            document.getElementById('expert-feedback').innerHTML = '';
        }

        function setupChecklist() {
            const checklistItems = document.querySelectorAll('.checklist-item');
            
            checklistItems.forEach(item => {
                item.addEventListener('click', function() {
                    const checkbox = this.querySelector('.checkbox');
                    if (checkbox.classList.contains('checked')) {
                        checkbox.classList.remove('checked');
                        checkbox.innerHTML = '';
                        this.classList.remove('checked');
                    } else {
                        checkbox.classList.add('checked');
                        checkbox.innerHTML = '‚úì';
                        this.classList.add('checked');
                    }
                });
            });
        }

        function submitChecklist() {
            const checkedItems = document.querySelectorAll('.checklist-item.checked');
            let totalPoints = 0;
            let maxPoints = 0;

            document.querySelectorAll('.checklist-item').forEach(item => {
                const points = parseInt(item.dataset.points);
                maxPoints += Math.max(points, 0);
                
                if (item.classList.contains('checked')) {
                    totalPoints += points;
                }
            });

            gameState.score += Math.max(totalPoints, 0);
            
            const feedback = document.getElementById('checklist-feedback');
            const percentage = Math.round((Math.max(totalPoints, 0) / maxPoints) * 100);
            
            if (percentage >= 80) {
                feedback.innerHTML = `<div class="feedback correct">Excellent checklist analysis! You identified the key risk areas systematically. Score: ${totalPoints}/${maxPoints} points. Checklists ensure comprehensive risk coverage.</div>`;
                if (!gameState.completedTechniques.includes('checklist')) {
                    gameState.completedTechniques.push('checklist');
                }
            } else {
                feedback.innerHTML = `<div class="feedback incorrect">Good start! You scored ${totalPoints}/${maxPoints} points. Remember to focus on project-relevant risk areas and avoid non-essential items.</div>`;
            }

            updateDisplay();
        }

        function setupSWOTDragDrop() {
            const swotItems = document.querySelectorAll('[data-swot]');
            const swotQuadrants = document.querySelectorAll('.swot-quadrant');

            swotItems.forEach(item => {
                item.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.dataset.swot);
                    this.classList.add('dragging');
                });

                item.addEventListener('dragend', function() {
                    this.classList.remove('dragging');
                });
            });

            swotQuadrants.forEach(quadrant => {
                quadrant.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.style.backgroundColor = 'rgba(78, 205, 196, 0.1)';
                });

                quadrant.addEventListener('dragleave', function() {
                    this.style.backgroundColor = '';
                });

                quadrant.addEventListener('drop', function(e) {
                    e.preventDefault();
                    const draggedSWOT = e.dataTransfer.getData('text/plain');
                    const quadrantSWOT = this.dataset.swot;
                    
                    this.style.backgroundColor = '';
                    
                    const draggedElement = document.querySelector('.risk-item.dragging');
                    if (draggedElement && draggedSWOT === quadrantSWOT) {
                        this.appendChild(draggedElement);
                    }
                });
            });
        }

        function checkSWOTAnswers() {
            const quadrants = document.querySelectorAll('.swot-quadrant');
            let correctCount = 0;
            let totalItems = 6;

            quadrants.forEach(quadrant => {
                const items = quadrant.querySelectorAll('.risk-item');
                items.forEach(item => {
                    if (item.dataset.swot === quadrant.dataset.swot) {
                        correctCount++;
                    }
                });
            });

            const score = Math.round((correctCount / totalItems) * 100);
            gameState.score += score;

            const feedback = document.getElementById('swot-feedback');
            if (correctCount === totalItems) {
                feedback.innerHTML = `<div class="feedback correct">Outstanding SWOT analysis! You correctly identified all internal and external factors. SWOT helps uncover risks from both organizational strengths/weaknesses and market opportunities/threats. +${score} points!</div>`;
                if (!gameState.completedTechniques.includes('swot')) {
                    gameState.completedTechniques.push('swot');
                }
            } else {
                feedback.innerHTML = `<div class="feedback incorrect">Good analysis! You got ${correctCount}/${totalItems} correct. Remember: Strengths/Weaknesses are internal factors, Opportunities/Threats are external factors. +${score} points!</div>`;
            }

            updateDisplay();
        }

        function setupHistoricalData() {
            const options = document.querySelectorAll('#historical-options .option');
            const submitBtn = document.getElementById('historical-submit');

            options.forEach(option => {
                option.addEventListener('click', function() {
                    options.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    submitBtn.disabled = false;
                });
            });
        }

        function submitHistoricalAnswer() {
            const selectedOption = document.querySelector('#historical-options .option.selected');
            const answer = selectedOption.dataset.answer;
            const question = historicalQuestions[gameState.historicalQuestionIndex];
            
            const options = document.querySelectorAll('#historical-options .option');
            options.forEach((option, index) => {
                option.classList.add(question.answers[index]);
            });

            const feedback = document.getElementById('historical-feedback');
            let points = 0;
            if (answer === 'correct') points = 100;
            else if (answer === 'partial') points = 50;

            gameState.score += points;
            feedback.innerHTML = `<div class="feedback ${answer === 'correct' ? 'correct' : 'incorrect'}">${question.feedback[answer]} +${points} points!</div>`;

            document.getElementById('historical-submit').disabled = true;

            // Load next question or complete
            setTimeout(() => {
                gameState.historicalQuestionIndex++;
                if (gameState.historicalQuestionIndex < historicalQuestions.length) {
                    loadNextHistoricalQuestion();
                } else {
                    if (!gameState.completedTechniques.includes('historical')) {
                        gameState.completedTechniques.push('historical');
                    }
                    feedback.innerHTML += '<div class="feedback correct">Historical Data Analysis completed! You\'ve learned how past project data can predict and prevent future risks.</div>';
                }
            }, 2000);

            updateDisplay();
        }

        function loadNextHistoricalQuestion() {
            const question = historicalQuestions[gameState.historicalQuestionIndex];
            document.getElementById('historical-question').textContent = question.question;
            
            const options = document.querySelectorAll('#historical-options .option');
            options.forEach((option, index) => {
                option.textContent = question.options[index];
                option.dataset.answer = question.answers[index];
                option.className = 'option';
            });

            document.getElementById('historical-submit').disabled = true;
            document.getElementById('historical-feedback').innerHTML = '';
        }

        function updateDisplay() {
            document.getElementById('score').textContent = gameState.score;
            document.getElementById('level').textContent = gameState.level;
            document.getElementById('current-technique').textContent = gameState.currentTechnique === 'none' ? 'None' : gameState.currentTechnique.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            // Update progress bar
            const progress = (gameState.completedTechniques.length / 5) * 100;
            document.getElementById('progress-fill').style.width = progress + '%';

            // Update level based on completed techniques
            gameState.level = Math.floor(gameState.completedTechniques.length / 2) + 1;

            // Check if all techniques completed
            if (gameState.completedTechniques.length === 5) {
                setTimeout(() => {
                    alert('üéâ Congratulations! You\'ve mastered all Risk Identification techniques! You\'re now ready to systematically identify risks in any project using brainstorming, expert interviews, checklists, SWOT analysis, and historical data review.');
                }, 1000);
            }
        }
    </script>
</body>
</html>